<UserControl
    x:Class="Screenbox.Controls.ErrorInfoPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Screenbox.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:strings="using:Screenbox.Strings"
    d:DesignHeight="600"
    d:DesignWidth="600"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Thickness x:Key="ErrorInfoPanelPadding">0,0,0,48</Thickness>
        <x:Double x:Key="ErrorInfoPanelMaxWidth">1024</x:Double>

        <x:String x:Key="ErrorInfoPanelSmileEmoticonText">:)</x:String>
        <x:String x:Key="ErrorInfoPanelLaughEmoticonText">:D</x:String>
        <x:String x:Key="ErrorInfoPanelFrownEmoticonText">:(</x:String>
        <x:String x:Key="ErrorInfoPanelCryEmoticonText">:'(</x:String>
        <x:String x:Key="ErrorInfoPanelSurpriseEmoticonText">:O</x:String>
        <x:String x:Key="ErrorInfoPanelWinkEmoticonText">;)</x:String>
        <x:String x:Key="ErrorInfoPanelSkepticalEmoticonText">:/</x:String>
        <x:String x:Key="ErrorInfoPanelNeutralEmoticonText">:|</x:String>

        <Thickness x:Key="ErrorInfoPanelEmoticonMargin">0,0,0,16</Thickness>
        <x:Double x:Key="ErrorInfoPanelEmoticonFontSize">128</x:Double>

        <Thickness x:Key="ErrorInfoPanelMessageMargin">0,0,0,40</Thickness>
        <x:Double x:Key="ErrorInfoPanelMessageFontSize">28</x:Double>
        <FontWeight x:Key="ErrorInfoPanelMessageFontWeight">Semilight</FontWeight>

        <Thickness x:Key="ErrorInfoPanelQrCodeMargin">0,0,20,0</Thickness>
        <x:Double x:Key="ErrorInfoPanelQrCodeSize">148</x:Double>
        <!--<x:Double x:Key="ErrorInfoPanelQrCodeStrokeThickness">4</x:Double>-->

        <Thickness x:Key="ErrorInfoPanelDescriptionMargin">0,24,0,0</Thickness>
    </UserControl.Resources>

    <ScrollViewer Padding="{x:Bind Padding, Mode=OneWay}" HorizontalScrollMode="Disabled">
        <Grid MaxWidth="{ThemeResource ErrorInfoPanelMaxWidth}" Padding="{ThemeResource ErrorInfoPanelPadding}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock
                x:Name="Emoticon"
                Grid.Row="0"
                Grid.ColumnSpan="2"
                Margin="{ThemeResource ErrorInfoPanelEmoticonMargin}"
                AutomationProperties.AccessibilityView="Raw"
                FontSize="{ThemeResource ErrorInfoPanelEmoticonFontSize}"
                OpticalMarginAlignment="TrimSideBearings"
                Text="{StaticResource ErrorInfoPanelFrownEmoticonText}" />

            <TextBlock
                x:Name="MessageTextBlock"
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Margin="{ThemeResource ErrorInfoPanelMessageMargin}"
                HorizontalAlignment="Left"
                AutomationProperties.AccessibilityView="Content"
                AutomationProperties.LiveSetting="Assertive"
                FontSize="{ThemeResource ErrorInfoPanelMessageFontSize}"
                FontWeight="{ThemeResource ErrorInfoPanelMessageFontWeight}"
                OpticalMarginAlignment="TrimSideBearings"
                Text="{x:Bind Message, Mode=OneWay}"
                TextWrapping="WrapWholeWords" />

            <Border
                x:Name="QrCodeBorder"
                Grid.Row="2"
                Grid.RowSpan="2"
                Margin="{ThemeResource ErrorInfoPanelQrCodeMargin}"
                VerticalAlignment="Top"
                Background="{ThemeResource SystemControlForegroundChromeWhiteBrush}">
                <ContentPresenter
                    MinWidth="{ThemeResource ErrorInfoPanelQrCodeSize}"
                    MinHeight="{ThemeResource ErrorInfoPanelQrCodeSize}"
                    AutomationProperties.AccessibilityView="Raw"
                    Content="{x:Bind QrCode, Mode=OneWay}" />
            </Border>

            <TextBlock
                x:Name="HelpLinkTextBlock"
                Grid.Row="2"
                Grid.Column="1"
                FontWeight="SemiLight"
                Style="{StaticResource SubtitleTextBlockStyle}"
                TextWrapping="WrapWholeWords">
                <Run Text="{x:Bind strings:Resources.CriticalErrorMoreInformation}" />
                <Hyperlink NavigateUri="{x:Bind NavigateUri, Mode=OneWay}" UnderlineStyle="None">
                    <Run AutomationProperties.AccessibilityView="Raw" Text="{x:Bind NavigateUri.ToString(), Mode=OneWay}" />
                </Hyperlink>
            </TextBlock>

            <TextBlock
                x:Name="DescriptionTextBlock"
                Grid.Row="3"
                Grid.Column="1"
                Margin="{ThemeResource ErrorInfoPanelDescriptionMargin}"
                Style="{StaticResource BodyTextBlockStyle}"
                Text="{x:Bind Description, Mode=OneWay}" />
        </Grid>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="EmoticonGroup">
                <VisualState x:Name="Frown" />

                <VisualState x:Name="Smile">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelSmileEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Laugh">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelLaughEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Cry">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelCryEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Surprise">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelSurpriseEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Wink">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelWinkEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Skeptical">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelSkepticalEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Neutral">
                    <VisualState.Setters>
                        <Setter Target="Emoticon.Text" Value="{StaticResource ErrorInfoPanelNeutralEmoticonText}" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>

            <VisualStateGroup x:Name="MessageGroup">
                <VisualState x:Name="MessageVisible" />

                <VisualState x:Name="MessageCollapsed">
                    <VisualState.Setters>
                        <Setter Target="MessageTextBlock.Visibility" Value="Collapsed" />
                        <Setter Target="Emoticon.Margin" Value="{ThemeResource ErrorInfoPanelMessageMargin}" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>

            <VisualStateGroup x:Name="QrCodeGroup">
                <VisualState x:Name="QrCodeVisible" />

                <VisualState x:Name="QrCodeCollapsed">
                    <VisualState.Setters>
                        <Setter Target="QrCodeBorder.Visibility" Value="Collapsed" />
                        <Setter Target="HelpLinkTextBlock.(Grid.Column)" Value="0" />
                        <Setter Target="HelpLinkTextBlock.(Grid.ColumnSpan)" Value="2" />
                        <Setter Target="DescriptionTextBlock.(Grid.Column)" Value="0" />
                        <Setter Target="DescriptionTextBlock.(Grid.ColumnSpan)" Value="2" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>

            <VisualStateGroup x:Name="HelpLinkGroup">
                <VisualState x:Name="NavigateUriVisible" />

                <VisualState x:Name="NavigateUriCollapsed">
                    <VisualState.Setters>
                        <Setter Target="HelpLinkTextBlock.Visibility" Value="Collapsed" />
                        <Setter Target="DescriptionTextBlock.(Grid.Row)" Value="2" />
                        <Setter Target="DescriptionTextBlock.Margin" Value="0,0,0,0" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>

            <VisualStateGroup x:Name="DescriptionGroup">
                <VisualState x:Name="DescriptionVisible" />

                <VisualState x:Name="DescriptionCollapsed">
                    <VisualState.Setters>
                        <Setter Target="DescriptionTextBlock.Visibility" Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </ScrollViewer>
</UserControl>
